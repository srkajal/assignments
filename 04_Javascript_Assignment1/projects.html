<!DOCTYPE HTML>
<html>
    <head>
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Projects</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css" />
        <link rel="stylesheet" href="profile.css" />
    </head>
    <body>
        <div class="container-fluid">
            <div class="page-header">
                <h3>Projects</h3>
                <a href="navigation.html" class="btn btn-link btn-primary" role="button" aria-pressed="true" style="float: right;">Back</a>
            </div>

            <!-- Project Modal -->
            <div class="modal fade" id="addProjectModal" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Enter Project Details</h4>
                        </div>
                        <div class="modal-body">
                            <p>Project Details</p>
                            <label for="projectId">Project Id:</label>
                            <input type="number" id="projectId" name="projectId" placeholder="Project Id" class="form-control"
                                required />
                            <label for="projectName">Project Name:</label>
                            <input type="text" id="projectName" name="projectName" placeholder="Project Name" class="form-control"
                                required />
                            <label for="StartDate">Start Date:</label>
                            <input type="date" id="StartDate" name="StartDate" placeholder="dd/MM/YYYY" class="form-control"
                                required />
                            <label for="endDate">End Date:</label>
                            <input type="date" id="endDate" name="endDate" placeholder="dd/MM/YYYY" class="form-control"
                                required />
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" id="btnSave" class="btn btn-primary" data-dismiss="modal" onclick="addProject()">Save changes</button>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Assignment Modal -->
            <div class="modal fade" id="addAssignmentModal" role="dialog">
                    <div class="modal-dialog">
    
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Enter Assignment Details</h4>
                            </div>
                            <div class="modal-body">
                                <p>Assignment Details</p>
                                <label for="customerId">Customer Id:</label>
                                <input type="number" id="customerId" name="customerId" placeholder="Customer Id" class="form-control"
                                    required />
                                <label for="customerName">Customer Name:</label>
                                <input type="text" id="customerName" name="customerName" placeholder="Customer Name" class="form-control"
                                    required />
                                <label for="StartDate">Assignment Start Date:</label>
                                <input type="date" id="StartDate" name="StartDate" placeholder="dd/MM/YYYY" class="form-control"
                                    required />
                                <label for="endDate">Assignment End Date:</label>
                                <input type="date" id="endDate" name="endDate" placeholder="dd/MM/YYYY" class="form-control"
                                    required />
                                <label for="projectLocation">Project Location:</label>
                                <input type="text" id="projectLocation" name="projectLocation" placeholder="Project Location" class="form-control"
                                    required />
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <button type="button" id="btnSave" class="btn btn-primary" data-dismiss="modal" onclick="addAssignment()">Save changes</button>
                            </div>
                        </div>
    
                    </div>
                </div>

            <div class="row" id="rowDiv">
                
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-xs-1">
                            <button type="button" class="btn btn-info btn-md" data-toggle="modal" data-target="#addProjectModal">+</button>
                        </div>
                        <div class="col-xs-1">
                            <button type="button" class="btn btn-info btn-md" onclick="removeProject()">-</button>
                        </div>
                        <div class="col-xs-10"></div>
                    </div>
                </div>
                <br>
                <input type="hidden" value="1" id="divProjectHid"/>
                <div id="divProject">
                        <div class="col-sm-6">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    Project - 1
                                </div>
                                <div class="panel-body">
        
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Project Id</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">123456</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Project Name</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">On-line Management</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Start Date</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">2015-03-02</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">End Date</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">2017-04-14</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
                <br>
                <div class="col-sm-6">
                        <div class="row">
                            <div class="col-xs-1">
                                <button type="button" class="btn btn-info btn-md" data-toggle="modal" data-target="#addAssignmentModal">+</button>
                            </div>
                            <div class="col-xs-1">
                                <button type="button" class="btn btn-info btn-md" onclick="removeAssignment()">-</button>
                            </div>
                            <div class="col-xs-10"></div>
                        </div>
                    </div>
                    <br>
                    <input type="hidden" value="1" id="divAssignmentHid"/>
                <div id="divAssignment">
                        <div class="col-sm-6">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    Assignment - 1
                                </div>
                                <div class="panel-body">
        
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Customer Id</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">123456</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Customer Name</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">Some Customer</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Assignment Start Date</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">2015-02-03</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Assignment End Date</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">2017-01-14</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-4 text-primary">Project Location</div>
                                        <div class="col-xs-1">:</div>
                                        <div class="col-xs-7 text-secondary">Bangalore</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>

        <script type="text/javascript">
        
            function addProject() {
                var element1 = document.getElementById("divProject");
                var projectId = document.getElementById("projectId").value;
                var projectName = document.getElementById("projectName").value;
                var StartDate = document.getElementById("StartDate").value;
                var endDate = document.getElementById("endDate").value;
                var divProjectHid = document.getElementById("divProjectHid").value;
                var newDivProjectHid = parseInt(divProjectHid, 10)+1;
                
                
                var flag1 = validation(endDate,StartDate,"Hire date should not be greater than end date");
    
                if(flag1){
                    element1.innerHTML += '<div class="col-sm-6"> <div class="panel panel-info"> <div class="panel-heading">Project - '+newDivProjectHid+'</div> <div class="panel-body">  <div class="row"> <div class="col-xs-4 text-primary">Project Id</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+projectId+'</div> </div> <div class="row"> <div class="col-xs-4 text-primary">Project Name</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+projectName+'</div> </div> <div class="row"> <div class="col-xs-4 text-primary">Start Date</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+StartDate+'</div> </div> <div class="row"> <div class="col-xs-4 text-primary">End Date</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+endDate+'</div> </div> </div> </div> </div>';
                    document.getElementById("divProjectHid").value = newDivProjectHid;
                }
            }
    
            function removeProject(){
                var element1 = document.getElementById("divProject");
                var divProjectHid = document.getElementById("divProjectHid").value;
                var divProjectHidNumber = parseInt(divProjectHid, 10);
                
                if(divProjectHidNumber >1){
                    element1.removeChild(element1.lastChild);
                    document.getElementById("divProjectHid").value = divProjectHidNumber - 1;
                } else {
                    alert("No of Project should not be less than 1");
                } 
            }

            function addAssignment(){
                var element1 = document.getElementById("divAssignment");
                var customerId = document.getElementById("customerId").value;
                var customerName = document.getElementById("customerName").value;
                var projectLocation = document.getElementById("projectLocation").value;
                var StartDate = document.getElementById("StartDate").value;
                var endDate = document.getElementById("endDate").value;
                var divAssignmentHid = document.getElementById("divAssignmentHid").value;
                var newDivAssignmentHid = parseInt(divAssignmentHid, 10)+1;
                
                
                var flag1 = validation(endDate,StartDate,"Hire date should not be greater than end date");
    
                if(flag1){
                    element1.innerHTML += '<div class="col-sm-6"> <div class="panel panel-info"> <div class="panel-heading">Assignment - '+newDivAssignmentHid+'</div> <div class="panel-body">  <div class="row"> <div class="col-xs-4 text-primary">Customer Id</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+customerId+'</div> </div> <div class="row"> <div class="col-xs-4 text-primary">Customer Name</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+customerName+'</div> </div> <div class="row"> <div class="col-xs-4 text-primary">Assignment Start Date</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+StartDate+'</div> </div> <div class="row"> <div class="col-xs-4 text-primary">Assignment End Date</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+endDate+'</div> </div> <div class="row"> <div class="col-xs-4 text-primary">Project Location</div> <div class="col-xs-1">:</div> <div class="col-xs-7 text-secondary">'+projectLocation+'</div> </div> </div> </div>';
                    document.getElementById("divAssignmentHid").value = newDivAssignmentHid;
                }
            }

            function removeAssignment(){
                var element1 = document.getElementById("divAssignment");
                var divAssignmentHid = document.getElementById("divAssignmentHid").value;
                var divAssignmentHidNumber = parseInt(divAssignmentHid, 10);
                
                if(divAssignmentHidNumber >1){
                    element1.removeChild(element1.lastChild);
                    document.getElementById("divAssignmentHid").value = divAssignmentHidNumber - 1;
                } else {
                    alert("No of Assignment should not be less than 1");
                } 
            }
    
            function monthDiff(d1, d2) {
                var d4 = dateByString(d2);
                var d3 = dateByString(d1);
    
                var diff =(d4.getTime() - d3.getTime()) / 1000;
                diff /= (60 * 60 * 24 * 7 * 4);
                return Math.abs(Math.floor(diff));
            }
    
            function dateByString(d){
                var d2 = d.split('-');
                //console.info(d2[0]+','+d2[1]+','+d[2]);
                return new Date(d2[0],d2[1]-1,d2[2]);
            }
    
            function validation(d5,d6,message){
                var d7 = dateByString(d5);
                var d8 = dateByString(d6);
    
                //console.info(d5+','+d6);
                if(d7.getTime()<d8.getTime()){
                    alert(message);
                    return false;
                }
    
                return true;
            }
        </script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>    
    </body>
</html>